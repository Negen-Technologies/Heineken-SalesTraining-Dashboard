{"ast":null,"code":"import axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./lessonActionTypes\";\nimport { AddLessonToModule } from \"../Modules/moduleAction\";\nexport const alllessonPending = () => {\n  return {\n    type: actionTypes.LESSON_PENDING,\n    isPending: true\n  };\n};\nexport const alllessonSuccess = data => {\n  return {\n    type: actionTypes.LESSON_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults\n  };\n};\nexport const lessonCreateSuccess = data => {\n  return {\n    type: actionTypes.CREATE_LESSON_SUCCESS,\n    data: data\n  };\n};\nexport const updatelessonSuccess = data => {\n  return {\n    type: actionTypes.UPDATE_LESSON_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport const deletelessonSuccess = data => {\n  return {\n    type: actionTypes.DELETE_LESSON_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport const alllessonFail = error => {\n  return {\n    type: actionTypes.LESSON_FAILED,\n    error: error,\n    isPending: false\n  };\n};\nexport const getAllLessonSuccess = (limit, page) => {\n  var token = localStorage.getItem(\"token\");\n  return dispatch => {\n    dispatch(alllessonPending());\n    axios({\n      method: \"get\",\n      url: URLst + `v1/lessons?limit=${limit}&page=${page}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(alllessonSuccess(res.data));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(alllessonFail(errorData));\n    });\n  };\n};\nexport const lessonCreate = (moduleid, formData, lessons) => {\n  console.log(formData);\n  return dispatch => {\n    dispatch(alllessonPending());\n    const token = localStorage.getItem(\"token\");\n    axios.post(URLst + \"v1/lessons\", formData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      AddLessonToModule(moduleid, res.data.id, lessons).then(result => {\n        console.log(result);\n\n        if (result == 200) {\n          dispatch(lessonCreateSuccess(res.data));\n        }\n      });\n    }).catch(err => {\n      var errorData;\n\n      if (err.response != null) {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(alllessonFail(errorData));\n    });\n  };\n};\nexport const AllLessonEdit = (id, lessons, edited) => {\n  const token = localStorage.getItem(\"token\");\n  return (dispatch, getState) => {\n    dispatch(alllessonPending());\n    axios({\n      method: \"patch\",\n      url: URLst + `v1/lessons/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      data: edited\n    }).then(res => {\n      console.log(res.data);\n      let newData = [...lessons];\n      let index = newData.findIndex(av => av.id === res.data.id);\n      newData[index].summary = edited.summary;\n      newData[index].title = edited.title;\n      newData[index].video_source = edited.video_source;\n      newData[index].order = edited.order;\n      dispatch(updatelessonSuccess(newData));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(alllessonFail(errorData));\n    });\n  };\n};\nexport const AllLessonDelete = (id, lessons) => {\n  var filtereddata = lessons.filter(item => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return dispatch => {\n    dispatch(alllessonPending());\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/lessons/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(deletelessonSuccess(filtereddata));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(alllessonFail(errorData));\n    });\n  };\n};","map":{"version":3,"sources":["/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/store/Lesson/lessonAction.js"],"names":["axios","URLst","handle401","actionTypes","AddLessonToModule","alllessonPending","type","LESSON_PENDING","isPending","alllessonSuccess","data","LESSON_SUCCESS","results","count","totalResults","lessonCreateSuccess","CREATE_LESSON_SUCCESS","updatelessonSuccess","UPDATE_LESSON_SUCCESS","deletelessonSuccess","DELETE_LESSON_SUCCESS","alllessonFail","error","LESSON_FAILED","getAllLessonSuccess","limit","page","token","localStorage","getItem","dispatch","method","url","headers","Authorization","then","res","console","log","catch","err","errorData","response","code","message","lessonCreate","moduleid","formData","lessons","post","id","result","AllLessonEdit","edited","getState","newData","index","findIndex","av","summary","title","video_source","order","AllLessonDelete","filtereddata","filter","item"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./lessonActionTypes\";\nimport { AddLessonToModule } from \"../Modules/moduleAction\";\n\nexport const alllessonPending = () => {\n  return {\n    type: actionTypes.LESSON_PENDING,\n    isPending: true,\n  };\n};\nexport const alllessonSuccess = (data) => {\n  return {\n    type: actionTypes.LESSON_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults,\n  };\n};\n\nexport const lessonCreateSuccess = (data) => {\n  return {\n    type: actionTypes.CREATE_LESSON_SUCCESS,\n    data: data,\n  };\n};\n\nexport const updatelessonSuccess = (data) => {\n  return {\n    type: actionTypes.UPDATE_LESSON_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const deletelessonSuccess = (data) => {\n  return {\n    type: actionTypes.DELETE_LESSON_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const alllessonFail = (error) => {\n  return {\n    type: actionTypes.LESSON_FAILED,\n    error: error,\n    isPending: false,\n  };\n};\n\nexport const getAllLessonSuccess = (limit, page) => {\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(alllessonPending());\n\n    axios({\n      method: \"get\",\n      url: URLst + `v1/lessons?limit=${limit}&page=${page}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res.data);\n        dispatch(alllessonSuccess(res.data));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(alllessonFail(errorData));\n      });\n  };\n};\n\nexport const lessonCreate = (moduleid, formData, lessons) => {\n  console.log(formData);\n  return (dispatch) => {\n    dispatch(alllessonPending());\n    const token = localStorage.getItem(\"token\");\n    axios\n      .post(\n        URLst + \"v1/lessons\",\n        formData,\n    \n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res.data);\n        AddLessonToModule(moduleid, res.data.id, lessons).then((result) => {\n          console.log(result);\n          if (result == 200) {\n            dispatch(lessonCreateSuccess(res.data));\n          }\n        });\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response != null) {\n          if (err.response.data.code == 401) {\n            handle401();\n          }\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(alllessonFail(errorData));\n      });\n  };\n};\n\nexport const AllLessonEdit = (id, lessons, edited) => {\n  const token = localStorage.getItem(\"token\");\n\n  return (dispatch, getState) => {\n    dispatch(alllessonPending());\n\n    axios({\n      method: \"patch\",\n      url: URLst + `v1/lessons/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      data:edited,\n    })\n      .then((res) => {\n        console.log(res.data)\n        let newData = [...lessons];\n        let index = newData.findIndex((av) => av.id === res.data.id);\n\n        newData[index].summary = edited.summary;\n        newData[index].title = edited.title;\n        newData[index].video_source = edited.video_source;\n        newData[index].order = edited.order;\n\n        dispatch(updatelessonSuccess(newData));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(alllessonFail(errorData));\n      });\n  };\n};\n\nexport const AllLessonDelete = (id, lessons) => {\n  var filtereddata = lessons.filter((item) => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(alllessonPending());\n\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/lessons/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        dispatch(deletelessonSuccess(filtereddata));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(alllessonFail(errorData));\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}