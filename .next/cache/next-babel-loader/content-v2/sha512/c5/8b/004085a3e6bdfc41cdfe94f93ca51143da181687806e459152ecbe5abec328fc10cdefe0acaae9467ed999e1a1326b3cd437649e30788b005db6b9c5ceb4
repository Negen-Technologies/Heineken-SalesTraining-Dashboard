{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/typography/style\";\nimport _Typography from \"antd/lib/typography\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _toConsumableArray from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAllRegionSuccess as _getAllRegionSuccess, regionCreate as _regionCreate, AllRegionEdit as _AllRegionEdit, AllRegionDelete as _AllRegionDelete } from \"../store\";\nimport withAuth from \"../utils/protectRoute\";\nimport URLst, { primary_color } from \"../utils/constants\";\n\nvar EditableCell = function EditableCell(_ref) {\n  var editing = _ref.editing,\n      dataIndex = _ref.dataIndex,\n      title = _ref.title,\n      inputType = _ref.inputType,\n      record = _ref.record,\n      index = _ref.index,\n      children = _ref.children,\n      restProps = _objectWithoutProperties(_ref, [\"editing\", \"dataIndex\", \"title\", \"inputType\", \"record\", \"index\", \"children\"]);\n\n  var inputNode = dataIndex === \"role\" ? /*#__PURE__*/_jsx(_Input, {\n    disabled: true\n  }) : /*#__PURE__*/_jsx(_Input, {});\n  return /*#__PURE__*/_jsx(\"td\", _objectSpread(_objectSpread({}, restProps), {}, {\n    children: editing ? /*#__PURE__*/_jsx(_Form.Item, {\n      name: dataIndex,\n      style: {\n        margin: 0\n      },\n      rules: [{\n        required: true,\n        message: \"Please Input \".concat(title, \"!\")\n      }],\n      children: inputNode\n    }) : children\n  }));\n};\n\nvar Regions = function Regions(props) {\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var numEachPage = 10;\n  var data = [];\n\n  var _useState = useState(false),\n      isVisible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(1),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  var _useState3 = useState([1]),\n      loadedpage = _useState3[0],\n      setLoadedPage = _useState3[1];\n\n  props.regions.forEach(function (element) {\n    data.push(_objectSpread(_objectSpread({}, element), {}, {\n      key: element.id\n    }));\n  });\n\n  var _useState4 = useState(\"\"),\n      editingKey = _useState4[0],\n      setEditingKey = _useState4[1];\n\n  useEffect(function () {\n    props.getAllRegionSuccess(numEachPage, 1);\n  }, []);\n\n  var isEditing = function isEditing(record) {\n    return record.key === editingKey;\n  };\n\n  var edit = function edit(record) {\n    form.setFieldsValue(_objectSpread({}, record));\n    setEditingKey(record.key);\n  };\n\n  var cancel = function cancel() {\n    setEditingKey(\"\");\n  }; //*********** Editing function ***********//\n\n\n  var save = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(key) {\n      var row;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return form.validateFields();\n\n            case 2:\n              row = _context.sent;\n              setEditingKey(\"\");\n              props.AllRegionEdit(key, props.regions, row);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function save(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); //*********** Deleting function ***********//\n\n\n  var handleDelete = function handleDelete(key) {\n    props.AllRegionDelete(key, props.regions);\n  };\n\n  var handleChange = function handleChange(pageNumber, size) {\n    numEachPage = size;\n    setCurrent(pageNumber);\n    props.getAllRegionSuccess(numEachPage, pageNumber);\n    setLoadedPage([].concat(_toConsumableArray(loadedpage), [pageNumber]));\n  };\n\n  var columns = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    editable: true\n  }, {\n    title: \"\",\n    dataIndex: \"\",\n    render: function render(_, record) {\n      var editable = isEditing(record);\n      return editable ? /*#__PURE__*/_jsxs(\"span\", {\n        children: [/*#__PURE__*/_jsx(_Popconfirm, {\n          title: \"Sure to save?\",\n          onConfirm: function onConfirm() {\n            return save(record.key);\n          },\n          children: /*#__PURE__*/_jsx(_Button, {\n            type: \"link\",\n            style: {\n              marginRight: 8\n            },\n            children: \"Save\"\n          })\n        }), /*#__PURE__*/_jsx(_Button, {\n          type: \"link\",\n          onClick: cancel,\n          children: \"Cancel\"\n        })]\n      }) : /*#__PURE__*/_jsx(_Typography.Link, {\n        disabled: editingKey !== \"\",\n        onClick: function onClick() {\n          return edit(record);\n        },\n        children: \"Edit\"\n      });\n    }\n  }, {\n    title: \"\",\n    dataIndex: \"\",\n    render: function render(_, record) {\n      return /*#__PURE__*/_jsx(_Popconfirm, {\n        title: \"Sure to delete?\",\n        onConfirm: function onConfirm() {\n          handleDelete(record.key);\n        },\n        children: /*#__PURE__*/_jsx(\"a\", {\n          style: {\n            color: \"red\"\n          },\n          children: \"Delete\"\n        })\n      });\n    }\n  }];\n  var mergedColumns = columns.map(function (col) {\n    if (!col.editable) {\n      return col;\n    }\n\n    return _objectSpread(_objectSpread({}, col), {}, {\n      onCell: function onCell(record) {\n        return {\n          record: record,\n          inputType: \"text\",\n          dataIndex: col.dataIndex,\n          title: col.title,\n          editing: isEditing(record)\n        };\n      }\n    });\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(_Row, {\n      children: [/*#__PURE__*/_jsxs(_Col, {\n        span: 18,\n        xs: 24,\n        sm: 24,\n        md: 18,\n        lg: 18,\n        xl: 18,\n        xxl: 18,\n        style: {\n          padding: \"0px 50px\"\n        },\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"All Regions\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\",\n            marginBottom: \"20px\"\n          }\n        }), \" \", /*#__PURE__*/_jsx(_Form, {\n          form: form,\n          component: false,\n          children: /*#__PURE__*/_jsx(_Table, {\n            components: {\n              body: {\n                cell: EditableCell\n              }\n            },\n            style: {// paddingTop: 20,\n            },\n            scroll: {\n              x: 200\n            },\n            bordered: true,\n            loading: props.regionsPending,\n            dataSource: data,\n            columns: mergedColumns,\n            rowClassName: \"editable-row\",\n            pagination: {\n              defaultCurrent: 1,\n              total: props.count,\n              onChange: handleChange,\n              defaultPageSize: numEachPage,\n              current: current,\n              responsive: true,\n              // showSizeChanger: true,\n              hideOnSinglePage: true,\n              pageSizeOptions: [\"10\", \"20\", \"50\", \"100\"]\n            }\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(_Col, {\n        span: 6,\n        xs: 24,\n        sm: 24,\n        md: 6,\n        lg: 6,\n        xl: 6,\n        xxl: 6,\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"Actions\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\"\n          }\n        }), /*#__PURE__*/_jsx(_Button, {\n          style: {\n            width: \"202px\",\n            margin: \"20px 0px\"\n          },\n          type: \"primary\",\n          onClick: function onClick() {\n            form.resetFields();\n            setVisible(true);\n          },\n          children: \"Add Region\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: \"Region\",\n      visible: isVisible,\n      closable: true,\n      okButtonProps: {\n        style: {\n          display: \"none\"\n        }\n      },\n      cancelButtonProps: {\n        style: {\n          display: \"none\"\n        }\n      },\n      onCancel: function onCancel() {\n        setVisible(false);\n      },\n      children: /*#__PURE__*/_jsxs(_Form, {\n        form: form,\n        onFinish: function onFinish(doc) {\n          props.regionCreate(doc);\n        },\n        children: [/*#__PURE__*/_jsx(_Form.Item, {\n          name: \"name\",\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Name\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          children: /*#__PURE__*/_jsx(\"p\", {\n            style: {\n              color: \"red\"\n            },\n            children: props.regionsError\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          style: {\n            textAlign: \"right\"\n          },\n          children: /*#__PURE__*/_jsx(_Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: props.regionsPending,\n            children: \"Submit\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    regions: state.allregions.allregions,\n    count: state.allregions.count,\n    regionsPending: state.allregions.loading,\n    regionsError: state.allregions.error\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getAllRegionSuccess: function getAllRegionSuccess(limit, page) {\n      return dispatch(_getAllRegionSuccess(limit, page));\n    },\n    AllRegionEdit: function AllRegionEdit(id, regions, edited) {\n      return dispatch(_AllRegionEdit(id, regions, edited));\n    },\n    AllRegionDelete: function AllRegionDelete(id, regions) {\n      return dispatch(_AllRegionDelete(id, regions));\n    },\n    regionCreate: function regionCreate(formData) {\n      return dispatch(_regionCreate(formData));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withAuth(Regions));","map":null,"metadata":{},"sourceType":"module"}