{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/typography/style\";\nimport _Typography from \"antd/lib/typography\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/space/style\";\nimport _Space from \"antd/lib/space\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _toConsumableArray from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAllUserSuccess as _getAllUserSuccess, AllUserEdit as _AllUserEdit, AllUserDelete as _AllUserDelete, UserCreate as _UserCreate } from \"../store\";\nimport withAuth from \"../utils/protectRoute\";\nimport URLst, { primary_color } from \"../utils/constants\";\nimport FormData from \"form-data\";\n\nvar EditableCell = function EditableCell(_ref) {\n  var editing = _ref.editing,\n      dataIndex = _ref.dataIndex,\n      title = _ref.title,\n      inputType = _ref.inputType,\n      record = _ref.record,\n      index = _ref.index,\n      children = _ref.children,\n      restProps = _objectWithoutProperties(_ref, [\"editing\", \"dataIndex\", \"title\", \"inputType\", \"record\", \"index\", \"children\"]);\n\n  var inputNode = dataIndex === \"role\" || dataIndex === \"username\" ? /*#__PURE__*/_jsx(_Input, {\n    disabled: true\n  }) : /*#__PURE__*/_jsx(_Input, {});\n  return /*#__PURE__*/_jsx(\"td\", _objectSpread(_objectSpread({}, restProps), {}, {\n    children: editing ? /*#__PURE__*/_jsx(_Form.Item, {\n      name: dataIndex,\n      style: {\n        margin: 0\n      },\n      rules: [{\n        required: true,\n        message: \"Please Input \".concat(title, \"!\")\n      }],\n      children: inputNode\n    }) : children\n  }));\n};\n\nvar UserManagment = function UserManagment(props) {\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var formData = new FormData();\n  var numEachPage = 10;\n  var data = [];\n\n  var _useState = useState(false),\n      isVisible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(1),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  var _useState3 = useState([1]),\n      loadedpage = _useState3[0],\n      setLoadedPage = _useState3[1];\n\n  props.users.forEach(function (element) {\n    data.push(_objectSpread(_objectSpread({}, element), {}, {\n      key: element.id\n    }));\n  });\n\n  var _useState4 = useState(\"\"),\n      editingKey = _useState4[0],\n      setEditingKey = _useState4[1];\n\n  useEffect(function () {\n    props.getAllUserSuccess(numEachPage, 1);\n  }, []);\n\n  var isEditing = function isEditing(record) {\n    return record.key === editingKey;\n  };\n\n  var edit = function edit(record) {\n    form.setFieldsValue(_objectSpread({}, record));\n    setEditingKey(record.key);\n  };\n\n  var cancel = function cancel() {\n    setEditingKey(\"\");\n  }; //*********** Editing function ***********//\n\n\n  var save = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(key) {\n      var row;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return form.validateFields();\n\n            case 2:\n              row = _context.sent;\n              setEditingKey(\"\");\n              props.AllUserEdit(key, props.users, row);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function save(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); //*********** Deleting function ***********//\n\n\n  var handleDelete = function handleDelete(key) {\n    props.AllUserDelete(key, props.users);\n  };\n\n  var handleChange = function handleChange(pageNumber, size) {\n    numEachPage = size;\n    setCurrent(pageNumber);\n    props.getAllUserSuccess(numEachPage, pageNumber);\n    setLoadedPage([].concat(_toConsumableArray(loadedpage), [pageNumber]));\n  };\n\n  var columns = [{\n    title: \"Name\",\n    dataIndex: \"name\",\n    editable: true,\n    render: function render(_, record) {\n      return /*#__PURE__*/_jsxs(_Space, {\n        children: [/*#__PURE__*/_jsx(_Avatar, {\n          size: \"small\",\n          src: \"\".concat(URLst, \"images/\").concat(record.image)\n        }), /*#__PURE__*/_jsx(\"p\", {\n          children: record.name\n        })]\n      });\n    }\n  }, {\n    title: \"Role\",\n    dataIndex: \"role\",\n    editable: true\n  }, {\n    title: \"Email\",\n    dataIndex: \"email\",\n    editable: true\n  }, {\n    title: \"Username\",\n    dataIndex: \"username\",\n    editable: true\n  }, {\n    title: \"\",\n    dataIndex: \"\",\n    render: function render(_, record) {\n      var editable = isEditing(record);\n      return editable ? /*#__PURE__*/_jsxs(\"span\", {\n        children: [/*#__PURE__*/_jsx(_Popconfirm, {\n          title: \"Sure to save?\",\n          onConfirm: function onConfirm() {\n            return save(record.key);\n          },\n          children: /*#__PURE__*/_jsx(_Button, {\n            type: \"link\",\n            style: {\n              marginRight: 8\n            },\n            children: \"Save\"\n          })\n        }), /*#__PURE__*/_jsx(_Button, {\n          type: \"link\",\n          onClick: cancel,\n          children: \"Cancel\"\n        })]\n      }) : /*#__PURE__*/_jsx(_Typography.Link, {\n        disabled: editingKey !== \"\",\n        onClick: function onClick() {\n          return edit(record);\n        },\n        children: \"Edit\"\n      });\n    }\n  }, {\n    title: \"\",\n    dataIndex: \"\",\n    render: function render(_, record) {\n      return /*#__PURE__*/_jsx(_Popconfirm, {\n        title: \"Sure to delete?\",\n        onConfirm: function onConfirm() {\n          handleDelete(record.key);\n        },\n        children: /*#__PURE__*/_jsx(\"a\", {\n          style: {\n            color: \"red\"\n          },\n          children: \"Delete\"\n        })\n      });\n    }\n  }];\n  var mergedColumns = columns.map(function (col) {\n    if (!col.editable) {\n      return col;\n    }\n\n    return _objectSpread(_objectSpread({}, col), {}, {\n      onCell: function onCell(record) {\n        return {\n          record: record,\n          inputType: col.dataIndex === \"age\" ? \"number\" : \"text\",\n          dataIndex: col.dataIndex,\n          title: col.title,\n          editing: isEditing(record)\n        };\n      }\n    });\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(_Row, {\n      children: [/*#__PURE__*/_jsxs(_Col, {\n        span: 18,\n        xs: 24,\n        sm: 24,\n        md: 18,\n        lg: 18,\n        xl: 18,\n        xxl: 18,\n        style: {\n          padding: \"0px 50px\"\n        },\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"All Users\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\",\n            marginBottom: \"20px\"\n          }\n        }), \" \", /*#__PURE__*/_jsx(_Form, {\n          form: form,\n          component: false,\n          children: /*#__PURE__*/_jsx(_Table, {\n            components: {\n              body: {\n                cell: EditableCell\n              }\n            },\n            style: {// paddingTop: 20,\n            },\n            scroll: {\n              x: 200\n            },\n            bordered: true,\n            loading: props.usersPending,\n            dataSource: data,\n            columns: mergedColumns,\n            rowClassName: \"editable-row\",\n            pagination: {\n              defaultCurrent: 1,\n              total: props.count,\n              onChange: handleChange,\n              defaultPageSize: numEachPage,\n              current: current,\n              responsive: true,\n              // showSizeChanger: true,\n              hideOnSinglePage: true,\n              pageSizeOptions: [\"10\", \"20\", \"50\", \"100\"]\n            }\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(_Col, {\n        span: 6,\n        xs: 24,\n        sm: 24,\n        md: 6,\n        lg: 6,\n        xl: 6,\n        xxl: 6,\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"Actions\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\"\n          }\n        }), /*#__PURE__*/_jsx(_Button, {\n          style: {\n            width: \"202px\",\n            margin: \"20px 0px\"\n          },\n          type: \"primary\",\n          onClick: function onClick() {\n            form.resetFields();\n            setVisible(true);\n          },\n          children: \"Add User\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_Modal, {\n      title: \"User Managment\",\n      visible: isVisible,\n      closable: true,\n      okButtonProps: {\n        style: {\n          display: \"none\"\n        }\n      },\n      cancelButtonProps: {\n        style: {\n          display: \"none\"\n        }\n      },\n      onCancel: function onCancel() {\n        setVisible(false);\n      },\n      children: /*#__PURE__*/_jsxs(_Form, {\n        form: form,\n        onFinish: function onFinish(doc) {\n          Object.keys(doc).forEach(function (ele) {\n            formData.append(ele, doc[ele]);\n          });\n          props.UserCreate(formData);\n        },\n        children: [/*#__PURE__*/_jsx(_Form.Item, {\n          name: \"name\",\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Name\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          name: \"username\",\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Username\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          name: \"email\",\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Email\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          name: \"role\",\n          children: /*#__PURE__*/_jsxs(_Select, {\n            placeholder: \"Role\",\n            children: [/*#__PURE__*/_jsx(_Select.Option, {\n              value: \"user\",\n              children: \"User\"\n            }), /*#__PURE__*/_jsx(_Select.Option, {\n              value: \"admin\",\n              children: \"Admin\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"image\",\n            type: \"file\",\n            onChange: function onChange(e) {\n              formData.append(\"file\", e.target.files[0]);\n            },\n            accept: \".png ,.jpg\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          name: \"password\",\n          children: /*#__PURE__*/_jsx(_Input, {\n            placeholder: \"Password\"\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          children: /*#__PURE__*/_jsx(\"p\", {\n            style: {\n              color: \"red\"\n            },\n            children: props.usersError\n          })\n        }), /*#__PURE__*/_jsx(_Form.Item, {\n          style: {\n            textAlign: \"right\"\n          },\n          children: /*#__PURE__*/_jsx(_Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: props.usersPending,\n            children: \"Submit\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.allusers.allusers,\n    count: state.allusers.count,\n    usersPending: state.allusers.loading,\n    usersError: state.allusers.error\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getAllUserSuccess: function getAllUserSuccess(limit, page) {\n      return dispatch(_getAllUserSuccess(limit, page));\n    },\n    AllUserEdit: function AllUserEdit(id, users, edited) {\n      return dispatch(_AllUserEdit(id, users, edited));\n    },\n    AllUserDelete: function AllUserDelete(id, users) {\n      return dispatch(_AllUserDelete(id, users));\n    },\n    UserCreate: function UserCreate(formData) {\n      return dispatch(_UserCreate(formData));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withAuth(UserManagment));","map":null,"metadata":{},"sourceType":"module"}