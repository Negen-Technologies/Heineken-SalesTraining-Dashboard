{"ast":null,"code":"import _regeneratorRuntime from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./courseActionTypes\";\nexport var allcoursePending = function allcoursePending() {\n  return {\n    type: actionTypes.COURSE_PENDING,\n    isPending: true\n  };\n};\nexport var allcourseSuccess = function allcourseSuccess(data) {\n  return {\n    type: actionTypes.COURSE_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults\n  };\n};\nexport var courseCreateSuccess = function courseCreateSuccess(data) {\n  return {\n    type: actionTypes.CREATE_COURSE_SUCCESS,\n    data: data\n  };\n};\nexport var updateCourseSuccess = function updateCourseSuccess(data) {\n  return {\n    type: actionTypes.UPDATE_COURSE_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport var deleteCourseSuccess = function deleteCourseSuccess(data) {\n  return {\n    type: actionTypes.DELETE_COURSE_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport var allcourseFail = function allcourseFail(error) {\n  return {\n    type: actionTypes.COURSE_FAILED,\n    error: error,\n    isPending: false\n  };\n};\nexport var getAllCourseSuccess = function getAllCourseSuccess(limit, page) {\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch) {\n    dispatch(allcoursePending());\n    axios({\n      method: \"get\",\n      url: URLst + \"v1/courses?limit=\".concat(limit, \"&page=\").concat(page),\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(allcourseSuccess(res.data));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport var getSingleCourseSuccess = function getSingleCourseSuccess(id) {\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch) {\n    dispatch(allcoursePending());\n    axios({\n      method: \"get\",\n      url: URLst + \"v1/courses/\".concat(id),\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(allcourseSuccess({\n        results: [res.data],\n        totalResults: 1\n      }));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport var courseCreate = function courseCreate(formData) {\n  return function (dispatch) {\n    dispatch(allcoursePending());\n    var token = localStorage.getItem(\"token\");\n    axios.post(URLst + \"v1/courses\", // { name: formData.name },\n    formData, {\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(courseCreateSuccess(res.data));\n    })[\"catch\"](function (err) {\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport var AllCourseEdit = function AllCourseEdit(id, courses, edited) {\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch, getState) {\n    dispatch(allcoursePending());\n    axios({\n      method: \"patch\",\n      url: URLst + \"v1/courses/\".concat(id),\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      },\n      data: edited\n    }).then(function (res) {\n      var newData = _toConsumableArray(courses);\n\n      var index = newData.findIndex(function (av) {\n        return av.id === res.data.id;\n      });\n      newData[index].title = edited.title;\n      newData[index].summary = edited.summary;\n      dispatch(updateCourseSuccess(newData));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\n_c = AllCourseEdit;\nexport var AllCourseDelete = function AllCourseDelete(id, courses) {\n  var filtereddata = courses.filter(function (item) {\n    return item.id !== id;\n  });\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch) {\n    dispatch(allcoursePending());\n    axios({\n      method: \"delete\",\n      url: URLst + \"v1/courses/\".concat(id),\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      dispatch(deleteCourseSuccess(filtereddata));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\n_c2 = AllCourseDelete;\nexport var AddModuleToCourse = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(courseid, moduleid, modules) {\n    var token, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            token = localStorage.getItem(\"token\");\n            _context.next = 3;\n            return axios({\n              method: \"patch\",\n              url: URLst + \"v1/courses/\".concat(courseid),\n              headers: {\n                Authorization: \"Bearer \".concat(token)\n              },\n              data: {\n                \"modules\": [].concat(_toConsumableArray(modules), [moduleid])\n              }\n            }).then(function (res) {\n              console.log(res.data);\n              return 200;\n            })[\"catch\"](function (err) {\n              var errorData;\n\n              if (err.response != null) {\n                errorData = err.response.data.message;\n              } else {\n                errorData = err.message;\n              }\n\n              console.log(errorData);\n              return 400;\n            });\n\n          case 3:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function AddModuleToCourse(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n_c3 = AddModuleToCourse;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"AllCourseEdit\");\n$RefreshReg$(_c2, \"AllCourseDelete\");\n$RefreshReg$(_c3, \"AddModuleToCourse\");","map":{"version":3,"sources":["/Users/eyasu/Desktop/leanbits/Heineken-SalesTraining-Dashboard/store/Courses/courseAction.js"],"names":["axios","URLst","handle401","actionTypes","allcoursePending","type","COURSE_PENDING","isPending","allcourseSuccess","data","COURSE_SUCCESS","results","count","totalResults","courseCreateSuccess","CREATE_COURSE_SUCCESS","updateCourseSuccess","UPDATE_COURSE_SUCCESS","deleteCourseSuccess","DELETE_COURSE_SUCCESS","allcourseFail","error","COURSE_FAILED","getAllCourseSuccess","limit","page","token","localStorage","getItem","dispatch","method","url","headers","Authorization","then","res","console","log","err","errorData","response","code","message","getSingleCourseSuccess","id","courseCreate","formData","post","AllCourseEdit","courses","edited","getState","newData","index","findIndex","av","title","summary","AllCourseDelete","filtereddata","filter","item","AddModuleToCourse","courseid","moduleid","modules"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./courseActionTypes\";\n\nexport const allcoursePending = () => {\n  return {\n    type: actionTypes.COURSE_PENDING,\n    isPending: true,\n  };\n};\nexport const allcourseSuccess = (data) => {\n  return {\n    type: actionTypes.COURSE_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults,\n  };\n};\n\nexport const courseCreateSuccess = (data) => {\n  return {\n    type: actionTypes.CREATE_COURSE_SUCCESS,\n    data: data,\n  };\n};\n\nexport const updateCourseSuccess = (data) => {\n  return {\n    type: actionTypes.UPDATE_COURSE_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const deleteCourseSuccess = (data) => {\n  return {\n    type: actionTypes.DELETE_COURSE_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const allcourseFail = (error) => {\n  return {\n    type: actionTypes.COURSE_FAILED,\n    error: error,\n    isPending: false,\n  };\n};\n\nexport const getAllCourseSuccess = (limit, page) => {\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses?limit=${limit}&page=${page}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res.data);\n        dispatch(allcourseSuccess(res.data));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const getSingleCourseSuccess = (id) => {\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(\n          allcourseSuccess({\n            results: [res.data],\n            totalResults: 1,\n          })\n        );\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const courseCreate = (formData) => {\n  return (dispatch) => {\n    dispatch(allcoursePending());\n    const token = localStorage.getItem(\"token\");\n    axios\n      .post(\n        URLst + \"v1/courses\",\n        // { name: formData.name },\n        formData,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(courseCreateSuccess(res.data));\n      })\n      .catch((err) => {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n\n        var errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AllCourseEdit = (id, courses, edited) => {\n  const token = localStorage.getItem(\"token\");\n\n  return (dispatch, getState) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"patch\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      data: edited,\n    })\n      .then((res) => {\n        let newData = [...courses];\n        let index = newData.findIndex((av) => av.id === res.data.id);\n\n        newData[index].title = edited.title;\n        newData[index].summary = edited.summary;\n\n        dispatch(updateCourseSuccess(newData));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AllCourseDelete = (id, courses) => {\n  var filtereddata = courses.filter((item) => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        dispatch(deleteCourseSuccess(filtereddata));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AddModuleToCourse = async (courseid, moduleid, modules) => {\n  const token = localStorage.getItem(\"token\");\n\n  let res=await axios({\n    method: \"patch\",\n    url: URLst + `v1/courses/${courseid}`,\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n    data: {\n      \"modules\": [...modules, moduleid],\n    },\n  })\n    .then((res) => {\n      console.log(res.data);\n      return 200;\n      \n    })\n    .catch((err) => {\n      let errorData;\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n      console.log(errorData);\n      return 400;\n    });\n\n    return res;\n};\n"]},"metadata":{},"sourceType":"module"}