{"ast":null,"code":"import _defineProperty from \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/space/style\";\nimport _Space from \"antd/lib/space\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _regeneratorRuntime from \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/Components/ProfilePage/ProfileLayout.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { EditOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { editProfileAction } from \"../../store/Profile/EditProfileAction\";\nimport storage from \"../../utils/firebaseUpload\";\nimport withAuth from \"../utils/protectRoute\";\nimport URLst, { primary_color } from \"../utils/constants\";\nimport FormData from \"form-data\";\n\nfunction ProfileLayout(_ref) {\n  _s();\n\n  var editProfileData = _ref.editProfileData,\n      userData = _ref.userData,\n      editProfile = _ref.editProfile;\n\n  var _useState = useState([]),\n      fileList = _useState[0],\n      setFileList = _useState[1];\n\n  var _useState2 = useState(false),\n      uploading = _useState2[0],\n      setUploading = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      imageFile = _useState3[0],\n      setImageFile = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      imageUrl = _useState4[0],\n      setImageUrl = _useState4[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var formData = new FormData();\n  var router = useRouter();\n  useEffect(function () {\n    if (userData.token) {\n      form.setFieldsValue({\n        name: userData.data.name,\n        username: userData.data.username,\n        email: userData.data.email,\n        password: userData.data.password\n      });\n    }\n  });\n\n  var onUploadSuccess = function onUploadSuccess(image) {\n    setFileList([]);\n    image.status = \"done\";\n    image.url = imageUrl;\n    image.thumbUrl = imageUrl;\n    image.percent = 100;\n    var newFileList = [image];\n    setFileList(newFileList);\n  };\n\n  var onUploadError = function onUploadError(image) {\n    setFileList([]);\n    image.status = \"error\";\n    image.url = \"\";\n    image.thumbUrl = \"\";\n    image.percent = 0;\n    var newFileList = [image];\n    setFileList(newFileList);\n  };\n\n  var uploadImg = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(image) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(image == null)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              setImageUrl(\"Getting Download Link...\");\n              storage.ref(\"/images/\".concat(image.name)).put(image).then(function () {\n                storage.ref(\"images\").child(image.name).getDownloadURL().then(function (url) {\n                  setImageUrl(url);\n                  onUploadSuccess(image);\n                  setUploading(false);\n                })[\"catch\"](function (err) {\n                  setImageUrl(\"\");\n                  onUploadError(image);\n                  setUploading(false);\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadImg(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var props = {\n    onRemove: function onRemove(file) {\n      setFileList([]);\n    },\n    onChange: function onChange(info) {\n      setUploading(true);\n      setFileList([]);\n      uploadImg(info.file);\n    },\n    beforeUpload: function () {\n      var _beforeUpload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(file) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                setImageFile(URL.createObjectURL(file));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function beforeUpload(_x2) {\n        return _beforeUpload.apply(this, arguments);\n      }\n\n      return beforeUpload;\n    }(),\n    fileList: fileList\n  };\n\n  function success() {\n    _Modal.success({\n      title: editProfileData.message\n    });\n  }\n\n  if (editProfileData.message) {\n    success();\n  }\n\n  var onSubmit = function onSubmit(checkedValues) {\n    checkedValues[\"url\"] = imageUrl;\n    editProfile(checkedValues);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 18,\n        xs: 24,\n        sm: 24,\n        md: 18,\n        lg: 18,\n        xl: 18,\n        xxl: 18,\n        style: {\n          padding: \"0px 50px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"User Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\",\n            marginBottom: \"20px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(_Form, {\n          form: form,\n          component: false,\n          children: /*#__PURE__*/_jsxDEV(_Form, {\n            size: \"large\",\n            form: form,\n            labelCol: {\n              span: 4\n            },\n            onFinish: function onFinish(checkedValues) {\n              return onSubmit(checkedValues);\n            },\n            wrapperCol: {\n              xs: {\n                span: 16,\n                offset: 1\n              },\n              sm: {\n                span: 16,\n                offset: 3\n              },\n              md: {\n                span: 12,\n                offset: 4\n              },\n              lg: {\n                span: 12,\n                offset: 6\n              },\n              xl: {\n                span: 12,\n                offset: 6\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"name\",\n              rules: [{\n                required: true,\n                message: \"\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                placeholder: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"username\",\n              rules: [{\n                required: true,\n                message: \"\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                placeholder: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"email\",\n              rules: [{\n                type: \"email\",\n                message: \"The input is not valid E-mail!\"\n              }, {\n                required: true,\n                message: \"Please input your E-mail!\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                placeholder: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              name: \"password\",\n              children: /*#__PURE__*/_jsxDEV(_Input, {\n                placeholder: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: \"red\"\n                },\n                children: props.usersError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              children: [/*#__PURE__*/_jsxDEV(_Button, {\n                type: \"default\",\n                htmlType: \"submit\",\n                className: \"login-form-button\",\n                onClick: function onClick() {\n                  return router.back();\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                className: \"login-form-button\",\n                style: {\n                  marginLeft: 30\n                },\n                loading: editProfileData.isPending,\n                disabled: uploading,\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 6,\n        xs: 24,\n        sm: 24,\n        md: 6,\n        lg: 6,\n        xl: 6,\n        xxl: 6,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 600,\n            color: primary_color\n          },\n          children: \"Actions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"auto\",\n            backgroundColor: primary_color,\n            height: \"2px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 40,\n            marginTop: \"5%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(_Upload, _objectSpread(_objectSpread({}, props), {}, {\n            showUploadList: {\n              showRemoveIcon: false,\n              showPreviewIcon: false,\n              showDownloadIcon: false\n            },\n            accept: \".jpg, .jpeg, .png\",\n            children: /*#__PURE__*/_jsxDEV(_Space, {\n              align: \"end\",\n              children: [/*#__PURE__*/_jsxDEV(_Avatar, {\n                offset: 5,\n                size: {\n                  xs: 80,\n                  sm: 80,\n                  md: 100,\n                  lg: 140,\n                  xl: 140,\n                  xxl: 140\n                },\n                src: uploading ? \"\" : imageFile,\n                children: uploading ? /*#__PURE__*/_jsxDEV(LoadingOutlined, {\n                  style: {\n                    color: \"blue\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this) : \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfileLayout, \"d8HDJPqnCZeqpXUdgFr/dfEmFmY=\", false, function () {\n  return [_Form.useForm, useRouter];\n});\n\n_c = ProfileLayout;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userData: state.auth,\n    editProfileData: state.editProfile\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    editProfile: function editProfile(checkedValues) {\n      return dispatch(editProfileAction(checkedValues));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileLayout);\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileLayout\");","map":{"version":3,"sources":["/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/Components/ProfilePage/ProfileLayout.js"],"names":["React","useState","useEffect","connect","useRouter","EditOutlined","LoadingOutlined","editProfileAction","storage","withAuth","URLst","primary_color","FormData","ProfileLayout","editProfileData","userData","editProfile","fileList","setFileList","uploading","setUploading","imageFile","setImageFile","imageUrl","setImageUrl","useForm","form","formData","router","token","setFieldsValue","name","data","username","email","password","onUploadSuccess","image","status","url","thumbUrl","percent","newFileList","onUploadError","uploadImg","ref","put","then","child","getDownloadURL","err","props","onRemove","file","onChange","info","beforeUpload","URL","createObjectURL","success","title","message","onSubmit","checkedValues","padding","fontSize","fontWeight","color","width","backgroundColor","height","marginBottom","span","xs","offset","sm","md","lg","xl","required","type","usersError","back","marginLeft","isPending","marginTop","showRemoveIcon","showPreviewIcon","showDownloadIcon","xxl","mapStateToProps","state","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Avatar,\n  Input,\n  Form,\n  Space,\n  Button,\n  Modal,\n  Upload,\n  Select,\n} from \"antd\";\nimport { connect } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { EditOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { editProfileAction } from \"../../store/Profile/EditProfileAction\";\nimport storage from \"../../utils/firebaseUpload\";\nimport withAuth from \"../utils/protectRoute\";\nimport URLst,{ primary_color } from \"../utils/constants\";\nimport FormData from \"form-data\";\n\nfunction ProfileLayout({\n  editProfileData,\n  userData,\n\n  editProfile,\n}) {\n  const [fileList, setFileList] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [imageFile, setImageFile] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [form] = Form.useForm();\n  const formData = new FormData();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (userData.token) {\n  \n\n      form.setFieldsValue({\n        name: userData.data.name,\n        username: userData.data.username,\n        email: userData.data.email,\n        password: userData.data.password,\n        \n        \n      });\n    }\n  });\n\n  const onUploadSuccess = (image) => {\n    setFileList([]);\n    image.status = \"done\";\n    image.url = imageUrl;\n    image.thumbUrl = imageUrl;\n    image.percent = 100;\n    const newFileList = [image];\n    setFileList(newFileList);\n  };\n  const onUploadError = (image) => {\n    setFileList([]);\n    image.status = \"error\";\n    image.url = \"\";\n    image.thumbUrl = \"\";\n    image.percent = 0;\n    const newFileList = [image];\n    setFileList(newFileList);\n  };\n  const uploadImg = async (image) => {\n    if (image == null) return;\n    setImageUrl(\"Getting Download Link...\");\n \n    storage\n      .ref(`/images/${image.name}`)\n      .put(image)\n      .then(() => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then((url) => {\n            setImageUrl(url);\n            onUploadSuccess(image);\n            setUploading(false);\n          })\n          .catch((err) => {\n            setImageUrl(\"\");\n            onUploadError(image);\n            setUploading(false);\n          });\n      });\n  };\n\n  const props = {\n    onRemove: (file) => {\n      setFileList([]);\n    },\n    onChange: (info) => {\n      setUploading(true);\n      setFileList([]);\n      uploadImg(info.file);\n    },\n    beforeUpload: async (file) => {\n      setImageFile(URL.createObjectURL(file));\n    },\n    fileList,\n  };\n\n  function success() {\n    Modal.success({\n      title: editProfileData.message,\n    });\n  }\n  if (editProfileData.message) {\n    success();\n  }\n  const onSubmit = (checkedValues) => {\n    checkedValues[\"url\"] = imageUrl;\n\n    editProfile(checkedValues);\n  };\n\n  return (\n    <div>\n      <Row>\n        <Col\n          span={18}\n          xs={24}\n          sm={24}\n          md={18}\n          lg={18}\n          xl={18}\n          xxl={18}\n          style={{\n            padding: \"0px 50px\",\n          }}\n        >\n          <h1\n            style={{\n              fontSize: 20,\n              fontWeight: 600,\n              color: primary_color,\n            }}\n          >\n            User Profile\n          </h1>\n          <div\n            style={{\n              width: \"auto\",\n              backgroundColor: primary_color,\n              height: \"2px\",\n              marginBottom: \"20px\",\n            }}\n          ></div>{\" \"}\n          <Form form={form} component={false}>\n\n        <Form\n          size=\"large\"\n          form={form}\n          labelCol={{ span: 4 }}\n          onFinish={(checkedValues) => onSubmit(checkedValues)}\n          wrapperCol={{\n            xs: { span: 16, offset: 1 },\n            sm: { span: 16, offset: 3 },\n            md: { span: 12, offset: 4 },\n            lg: { span: 12, offset: 6 },\n            xl: { span: 12, offset: 6 },\n          }}\n        >\n         \n          <Form.Item name=\"name\"\n           rules={[{ required: true, message: \"\" }]}>\n            <Input placeholder=\"Name\" />\n          </Form.Item>\n\n          <Form.Item name=\"username\"\n          rules={[{ required: true, message: \"\" }]}>\n            <Input placeholder=\"Username\" />\n          </Form.Item>\n        <Form.Item\n            name=\"email\"\n            rules={[\n              {\n                type: \"email\",\n                message: \"The input is not valid E-mail!\",\n              },\n              {\n                required: true,\n                message: \"Please input your E-mail!\",\n              },\n            ]}\n          >\n            <Input placeholder=\"Email\" />\n          </Form.Item>\n          <Form.Item name=\"password\">\n            <Input placeholder=\"Password\" />\n          </Form.Item>\n          <Form.Item>\n            <p style={{ color: \"red\" }}>{props.usersError}</p>\n          </Form.Item>\n\n          <Form.Item>\n            <Button\n              type=\"default\"\n              htmlType=\"submit\"\n              className=\"login-form-button\"\n              onClick={() => router.back()}\n            >\n              Cancel\n            </Button>\n\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              className=\"login-form-button\"\n              style={{ marginLeft: 30 }}\n              loading={editProfileData.isPending}\n              disabled={uploading}\n            >\n              Submit\n            </Button>\n           \n          </Form.Item>\n        </Form>\n        </Form>\n        </Col>\n        <Col span={6} xs={24} sm={24} md={6} lg={6} xl={6} xxl={6}>\n          <h1\n            style={{\n              fontSize: 20,\n              fontWeight: 600,\n              color: primary_color,\n            }}\n          >\n            Actions\n          </h1>\n          <div\n            style={{\n              width: \"auto\",\n              backgroundColor: primary_color,\n              height: \"2px\",\n            }}\n          ></div>\n\n<div style={{ marginBottom: 40, marginTop: \"5%\" }}>\n            <Upload\n              {...props}\n              showUploadList={{\n                showRemoveIcon: false,\n                showPreviewIcon: false,\n                showDownloadIcon: false,\n              }}\n              accept=\".jpg, .jpeg, .png\"\n            >\n              <Space align=\"end\">\n                <Avatar\n                  offset={5}\n                  size={{ xs: 80, sm: 80, md: 100, lg: 140, xl: 140, xxl: 140 }}\n                  src={uploading ? \"\" : imageFile}\n                >\n                  {uploading ? (\n                    <LoadingOutlined style={{ color: \"blue\" }} />\n                  ) : (\n                    \"Profile\"\n                  )}\n                </Avatar>\n                <EditOutlined />\n              </Space>\n            </Upload>\n          </div>\n        </Col>\n      </Row>\n\n      </div>\n\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userData: state.auth,\n    editProfileData: state.editProfile,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    editProfile: (checkedValues) =>\n      dispatch(editProfileAction(checkedValues)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileLayout);"]},"metadata":{},"sourceType":"module"}