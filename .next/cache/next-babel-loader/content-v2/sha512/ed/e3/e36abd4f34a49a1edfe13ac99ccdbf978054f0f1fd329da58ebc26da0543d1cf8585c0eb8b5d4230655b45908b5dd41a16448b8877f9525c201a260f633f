{"ast":null,"code":"import axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./courseActionTypes\";\nexport const allcoursePending = () => {\n  return {\n    type: actionTypes.COURSE_PENDING,\n    isPending: true\n  };\n};\nexport const allcourseSuccess = data => {\n  return {\n    type: actionTypes.COURSE_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults\n  };\n};\nexport const courseCreateSuccess = data => {\n  return {\n    type: actionTypes.CREATE_COURSE_SUCCESS,\n    data: data\n  };\n};\nexport const updateCourseSuccess = data => {\n  return {\n    type: actionTypes.UPDATE_COURSE_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport const deleteCourseSuccess = data => {\n  return {\n    type: actionTypes.DELETE_COURSE_SUCCESS,\n    isPending: false,\n    data: data\n  };\n};\nexport const allcourseFail = error => {\n  return {\n    type: actionTypes.COURSE_FAILED,\n    error: error,\n    isPending: false\n  };\n};\nexport const getAllCourseSuccess = (limit, page) => {\n  var token = localStorage.getItem(\"token\");\n  return dispatch => {\n    dispatch(allcoursePending());\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses?limit=${limit}&page=${page}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(allcourseSuccess(res.data));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport const getSingleCourseSuccess = id => {\n  var token = localStorage.getItem(\"token\");\n  return dispatch => {\n    dispatch(allcoursePending());\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(allcourseSuccess({\n        results: [res.data],\n        totalResults: 1\n      }));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport const courseCreate = formData => {\n  return dispatch => {\n    dispatch(allcoursePending());\n    const token = localStorage.getItem(\"token\");\n    axios.post(URLst + \"v1/courses\", // { name: formData.name },\n    formData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(courseCreateSuccess(res.data));\n    }).catch(err => {\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport const AllCourseEdit = (id, courses, edited) => {\n  const token = localStorage.getItem(\"token\");\n  return (dispatch, getState) => {\n    dispatch(allcoursePending());\n    axios({\n      method: \"patch\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      data: edited\n    }).then(res => {\n      let newData = [...courses];\n      let index = newData.findIndex(av => av.id === res.data.id);\n      newData[index].title = edited.title;\n      newData[index].summary = edited.summary;\n      dispatch(updateCourseSuccess(newData));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      console.log(errorData);\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport const AllCourseDelete = (id, courses) => {\n  var filtereddata = courses.filter(item => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return dispatch => {\n    dispatch(allcoursePending());\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(deleteCourseSuccess(filtereddata));\n    }).catch(err => {\n      var errorData;\n\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(allcourseFail(errorData));\n    });\n  };\n};\nexport const AddModuleToCourse = async (courseid, moduleid, modules) => {\n  const token = localStorage.getItem(\"token\");\n  let res = await axios({\n    method: \"patch\",\n    url: URLst + `v1/courses/${courseid}`,\n    headers: {\n      Authorization: `Bearer ${token}`\n    },\n    data: {\n      \"modules\": [...modules, moduleid]\n    }\n  }).then(res => {\n    console.log(res.data);\n    return 200;\n  }).catch(err => {\n    let errorData;\n\n    if (err.response != null) {\n      errorData = err.response.data.message;\n    } else {\n      errorData = err.message;\n    }\n\n    console.log(errorData);\n    return 400;\n  });\n  return res;\n};","map":{"version":3,"sources":["/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/store/Courses/courseAction.js"],"names":["axios","URLst","handle401","actionTypes","allcoursePending","type","COURSE_PENDING","isPending","allcourseSuccess","data","COURSE_SUCCESS","results","count","totalResults","courseCreateSuccess","CREATE_COURSE_SUCCESS","updateCourseSuccess","UPDATE_COURSE_SUCCESS","deleteCourseSuccess","DELETE_COURSE_SUCCESS","allcourseFail","error","COURSE_FAILED","getAllCourseSuccess","limit","page","token","localStorage","getItem","dispatch","method","url","headers","Authorization","then","res","console","log","catch","err","errorData","response","code","message","getSingleCourseSuccess","id","courseCreate","formData","post","AllCourseEdit","courses","edited","getState","newData","index","findIndex","av","title","summary","AllCourseDelete","filtereddata","filter","item","AddModuleToCourse","courseid","moduleid","modules"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport URLst, { handle401 } from \"../../utils/constants\";\nimport * as actionTypes from \"./courseActionTypes\";\n\nexport const allcoursePending = () => {\n  return {\n    type: actionTypes.COURSE_PENDING,\n    isPending: true,\n  };\n};\nexport const allcourseSuccess = (data) => {\n  return {\n    type: actionTypes.COURSE_SUCCESS,\n    isPending: false,\n    data: data.results,\n    count: data.totalResults,\n  };\n};\n\nexport const courseCreateSuccess = (data) => {\n  return {\n    type: actionTypes.CREATE_COURSE_SUCCESS,\n    data: data,\n  };\n};\n\nexport const updateCourseSuccess = (data) => {\n  return {\n    type: actionTypes.UPDATE_COURSE_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const deleteCourseSuccess = (data) => {\n  return {\n    type: actionTypes.DELETE_COURSE_SUCCESS,\n    isPending: false,\n    data: data,\n  };\n};\n\nexport const allcourseFail = (error) => {\n  return {\n    type: actionTypes.COURSE_FAILED,\n    error: error,\n    isPending: false,\n  };\n};\n\nexport const getAllCourseSuccess = (limit, page) => {\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses?limit=${limit}&page=${page}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res.data);\n        dispatch(allcourseSuccess(res.data));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const getSingleCourseSuccess = (id) => {\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"get\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(\n          allcourseSuccess({\n            results: [res.data],\n            totalResults: 1,\n          })\n        );\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const courseCreate = (formData) => {\n  return (dispatch) => {\n    dispatch(allcoursePending());\n    const token = localStorage.getItem(\"token\");\n    axios\n      .post(\n        URLst + \"v1/courses\",\n        // { name: formData.name },\n        formData,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(courseCreateSuccess(res.data));\n      })\n      .catch((err) => {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n\n        var errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AllCourseEdit = (id, courses, edited) => {\n  const token = localStorage.getItem(\"token\");\n\n  return (dispatch, getState) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"patch\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      data: edited,\n    })\n      .then((res) => {\n        let newData = [...courses];\n        let index = newData.findIndex((av) => av.id === res.data.id);\n\n        newData[index].title = edited.title;\n        newData[index].summary = edited.summary;\n\n        dispatch(updateCourseSuccess(newData));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        console.log(errorData);\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AllCourseDelete = (id, courses) => {\n  var filtereddata = courses.filter((item) => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(allcoursePending());\n\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/courses/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        dispatch(deleteCourseSuccess(filtereddata));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(allcourseFail(errorData));\n      });\n  };\n};\n\nexport const AddModuleToCourse = async (courseid, moduleid, modules) => {\n  const token = localStorage.getItem(\"token\");\n\n  let res=await axios({\n    method: \"patch\",\n    url: URLst + `v1/courses/${courseid}`,\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n    data: {\n      \"modules\": [...modules, moduleid],\n    },\n  })\n    .then((res) => {\n      console.log(res.data);\n      return 200;\n      \n    })\n    .catch((err) => {\n      let errorData;\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n      console.log(errorData);\n      return 400;\n    });\n\n    return res;\n};\n"]},"metadata":{},"sourceType":"module"}