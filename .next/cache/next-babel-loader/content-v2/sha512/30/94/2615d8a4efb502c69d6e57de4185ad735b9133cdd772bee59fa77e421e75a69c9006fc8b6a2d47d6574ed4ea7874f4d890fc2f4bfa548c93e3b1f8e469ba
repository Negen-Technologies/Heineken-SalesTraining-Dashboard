{"ast":null,"code":"import _toConsumableArray from \"/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport axios from \"axios\";\nimport * as actionTypes from \"./avatar_actionTypes\";\nimport URLst, { handle401 } from \"../../utils/constants\"; // import handle401 from \"../../utils/constants\"\n\nexport var avatarStart = function avatarStart() {\n  return {\n    type: actionTypes.AVATAR_START\n  };\n};\nexport var avatarCreateSuccess = function avatarCreateSuccess(data) {\n  return {\n    type: actionTypes.AVATAR_CREATE_SUCCESS,\n    data: data\n  };\n};\nexport var avatarGetSuccess = function avatarGetSuccess(data) {\n  return {\n    type: actionTypes.AVATAR_GET_SUCCESS,\n    data: data\n  };\n};\nexport var avatarEditSuccess = function avatarEditSuccess(data) {\n  return {\n    type: actionTypes.AVATAR_EDIT_SUCCESS,\n    data: data\n  };\n};\nexport var avatarDeleteSuccess = function avatarDeleteSuccess(data) {\n  return {\n    type: actionTypes.AVATAR_DELETE_SUCCESS,\n    data: data\n  };\n}; // AVATAR_DELETE_SUCCESS\n\nexport var avatarFail = function avatarFail(error) {\n  return {\n    type: actionTypes.AVATAR_FAIL,\n    error: error\n  };\n};\nexport var avatarEdit = function avatarEdit(formData, id) {\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch, getState) {\n    var data = getState().avatar_reducer.data;\n    dispatch(avatarStart());\n    axios.patch(URLst + \"v1/avatars/\".concat(id), formData, {\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      var newData = _toConsumableArray(data);\n\n      var index = newData.findIndex(function (av) {\n        return av.id === res.data.id;\n      });\n      newData[index] = res.data;\n      dispatch(avatarEditSuccess(newData));\n    })[\"catch\"](function (err) {\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(avatarFail(errorData));\n    });\n  };\n};\nexport var avatarCreate = function avatarCreate(formData) {\n  return function (dispatch) {\n    dispatch(avatarStart());\n    var token = localStorage.getItem(\"token\");\n    axios.post(URLst + \"v1/avatars\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(avatarCreateSuccess(res.data));\n    })[\"catch\"](function (err) {\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(avatarFail(errorData));\n    });\n  };\n};\nexport var avatarGet = function avatarGet() {\n  return function (dispatch) {\n    dispatch(avatarStart());\n    var token = localStorage.getItem(\"token\");\n    axios.get(URLst + \"v1/avatars\", {\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      dispatch(avatarGetSuccess(res.data.results));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(avatarFail(errorData));\n    });\n  };\n};\nexport var avatarDelete = function avatarDelete(id, users) {\n  var filtereddata = users.filter(function (item) {\n    return item.id !== id;\n  });\n  var token = localStorage.getItem(\"token\");\n  return function (dispatch) {\n    dispatch(avatarStart());\n    axios({\n      method: \"delete\",\n      url: URLst + \"v1/avatars/\".concat(id),\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (res) {\n      console.log(res);\n      dispatch(avatarDeleteSuccess(filtereddata));\n    })[\"catch\"](function (err) {\n      if (err.response.data.code == 401) {\n        handle401();\n      }\n\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(avatarFail(errorData));\n    });\n  };\n};","map":{"version":3,"sources":["/home/eleni/Desktop/heniken/Heineken-SalesTraining-Dashboard/store/Avatar/avatar_actions.js"],"names":["axios","actionTypes","URLst","handle401","avatarStart","type","AVATAR_START","avatarCreateSuccess","data","AVATAR_CREATE_SUCCESS","avatarGetSuccess","AVATAR_GET_SUCCESS","avatarEditSuccess","AVATAR_EDIT_SUCCESS","avatarDeleteSuccess","AVATAR_DELETE_SUCCESS","avatarFail","error","AVATAR_FAIL","avatarEdit","formData","id","token","localStorage","getItem","dispatch","getState","avatar_reducer","patch","headers","Authorization","then","res","newData","index","findIndex","av","err","response","code","errorData","message","avatarCreate","post","console","log","avatarGet","get","results","avatarDelete","users","filtereddata","filter","item","method","url"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport * as actionTypes from \"./avatar_actionTypes\";\nimport URLst, { handle401 } from \"../../utils/constants\";\n\n// import handle401 from \"../../utils/constants\"\n\nexport const avatarStart = () => {\n  return {\n    type: actionTypes.AVATAR_START,\n  };\n};\n\nexport const avatarCreateSuccess = (data) => {\n  return {\n    type: actionTypes.AVATAR_CREATE_SUCCESS,\n    data: data,\n  };\n};\n\nexport const avatarGetSuccess = (data) => {\n  return {\n    type: actionTypes.AVATAR_GET_SUCCESS,\n    data: data,\n  };\n};\n\nexport const avatarEditSuccess = (data) => {\n  return {\n    type: actionTypes.AVATAR_EDIT_SUCCESS,\n    data: data,\n  };\n};\n\nexport const avatarDeleteSuccess = (data) => {\n  return {\n    type: actionTypes.AVATAR_DELETE_SUCCESS,\n    data: data,\n  };\n};\n// AVATAR_DELETE_SUCCESS\nexport const avatarFail = (error) => {\n  return {\n    type: actionTypes.AVATAR_FAIL,\n    error: error,\n  };\n};\n\nexport const avatarEdit = (formData, id) => {\n  const token = localStorage.getItem(\"token\");\n  return (dispatch, getState) => {\n    const { data } = getState().avatar_reducer;\n\n    dispatch(avatarStart());\n\n    axios\n      .patch(URLst + `v1/avatars/${id}`, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        let newData = [...data];\n        let index = newData.findIndex((av) => av.id === res.data.id);\n\n        newData[index] = res.data;\n\n        dispatch(avatarEditSuccess(newData));\n      })\n      .catch((err) => {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        let errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(avatarFail(errorData));\n      });\n  };\n};\n\nexport const avatarCreate = (formData) => {\n  return (dispatch) => {\n    dispatch(avatarStart());\n    const token = localStorage.getItem(\"token\");\n    axios\n      .post(URLst + \"v1/avatars\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(avatarCreateSuccess(res.data));\n      })\n      .catch((err) => {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        var errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(avatarFail(errorData));\n      });\n  };\n};\n\nexport const avatarGet = () => {\n  return (dispatch) => {\n    dispatch(avatarStart());\n    const token = localStorage.getItem(\"token\");\n    axios\n      .get(URLst + \"v1/avatars\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        console.log(res.data);\n\n        dispatch(avatarGetSuccess(res.data.results));\n      })\n      .catch((err) => {\n        var errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(avatarFail(errorData));\n      });\n  };\n};\nexport const avatarDelete = (id, users) => {\n  var filtereddata = users.filter((item) => item.id !== id);\n  var token = localStorage.getItem(\"token\");\n  return (dispatch) => {\n    dispatch(avatarStart());\n\n    axios({\n      method: \"delete\",\n      url: URLst + `v1/avatars/${id}`,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => {\n        console.log(res);\n        dispatch(avatarDeleteSuccess(filtereddata));\n      })\n      .catch((err) => {\n        if (err.response.data.code == 401) {\n          handle401();\n        }\n        var errorData;\n        if (err.response != null) {\n          errorData = err.response.data.message;\n        } else {\n          errorData = err.message;\n        }\n        dispatch(avatarFail(errorData));\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}