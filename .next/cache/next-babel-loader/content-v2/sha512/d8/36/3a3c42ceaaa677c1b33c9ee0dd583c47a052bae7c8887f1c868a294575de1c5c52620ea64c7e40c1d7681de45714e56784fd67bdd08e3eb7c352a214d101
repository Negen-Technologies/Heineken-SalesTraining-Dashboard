{"ast":null,"code":"import axios from \"axios\";\nimport * as actionTypes from \"./authactionTypes\";\nimport URLst from \"../../utils/constants\"; // import { loadingTrue } from \"../Loading/loadingAction\";\n\nexport var authStart = function authStart() {\n  return {\n    type: actionTypes.AUTH_START\n  };\n};\nexport var authSuccess = function authSuccess(token, data) {\n  localStorage.setItem(\"token\", token);\n  localStorage.setItem(\"role\", data.role);\n  localStorage.setItem(\"name\", data.name);\n  localStorage.setItem(\"username\", data.username);\n  localStorage.setItem(\"email\", data.email);\n  localStorage.setItem(\"id\", data.id);\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    token: token,\n    data: data\n  };\n};\nexport var authFail = function authFail(error) {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  };\n};\nexport var logout = function logout() {\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\nexport var authLogin = function authLogin(value) {\n  return function (dispatch) {\n    dispatch(authStart());\n    axios.post(URLst + \"v1/auth/login\", {\n      username: value.username,\n      password: value.password\n    }).then(function (res) {\n      // console.log(res.data);\n      var token = res.data.tokens.access.token;\n      var data = res.data.user; // dispatch(loadingTrue);\n\n      dispatch(authSuccess(token, data));\n    })[\"catch\"](function (err) {\n      var errorData;\n\n      if (err.response != null) {\n        errorData = err.response.data.message;\n      } else {\n        errorData = err.message;\n      }\n\n      dispatch(authFail(errorData));\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}